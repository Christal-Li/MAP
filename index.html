<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dog Friendly Map - Dog Walking Areas</title>
  <link rel="stylesheet" href="styles.css?v=20251005">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-left">
        <div class="logo">
          <i class="fas fa-paw"></i>
          <span>Dog Friendly Map</span>
        </div>
        <button class="nav-link" onclick="showAbout()">About</button>
      </div>
      <div class="nav-right">
        <button class="login-btn" onclick="showLogin()">
          <i class="fas fa-user"></i>
          Login
        </button>
        <div class="user-profile hidden" id="userProfile">
          <img src="https://via.placeholder.com/40" alt="Profile" class="profile-avatar">
          <div class="dropdown-menu">
            <a href="#" onclick="showProfile()">Profile</a>
            <a href="#" onclick="logout()">Logout</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Home Page -->
    <div id="homePage" class="page active">
      <div class="hero-section">
        <h1>Find the Perfect Dog Walking Spots</h1>
        <p>Discover dog-friendly parks and off-leash areas near you</p>
        
        <!-- Search Box -->
        <div class="search-container">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="addressSearch" placeholder="Enter your address in Brisbane">
            <button class="search-btn" onclick="searchLocation()">Search</button>
          </div>
          <div class="location-actions">
            <button class="current-location-btn" onclick="useCurrentLocation()">
              <i class="fas fa-crosshairs"></i>
              Use Current Location
            </button>
          </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
          <button class="filter-btn" data-filter-key="nightLighting" onclick="toggleTopFilter('nightLighting', this)">
            <i class="fas fa-lightbulb"></i>
            Night Lighting
          </button>
          <button class="filter-btn" data-filter-key="fenced" onclick="toggleTopFilter('fenced', this)">
            <i class="fas fa-shield"></i>
            Fencing
          </button>
          <button class="filter-btn" data-filter-key="offLeash" onclick="toggleTopFilter('offLeash', this)">
            <i class="fas fa-dog"></i>
            Off-Leash
          </button>
          <button class="filter-btn" data-filter-key="smallDogEnclosure" onclick="toggleTopFilter('smallDogEnclosure', this)">
            <i class="fas fa-paw"></i>
            SMALL DOG ENCLOSURE
          </button>
          <button class="filter-btn" data-filter-key="agility" onclick="toggleTopFilter('agility', this)">
            <i class="fas fa-person-running"></i>
            DOG AGILITY EQUIPMENT
          </button>
          <button class="filter-btn" data-filter-key="waterFountain" onclick="toggleTopFilter('waterFountain', this)">
            <i class="fas fa-droplet"></i>
            Water Fountain
          </button>
        </div>

        <!-- Saved Preferences Button -->
        <div class="preferences-section">
          <button class="preferences-btn" onclick="showPreferences()">
            <i class="fas fa-heart"></i>
            My Saved Preferences
          </button>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="primary-btn" onclick="showMapView()">
            <i class="fas fa-map"></i>
            View Map
          </button>
          <button class="secondary-btn" onclick="showListView()">
            <i class="fas fa-list"></i>
            View List
          </button>
        </div>
      </div>
    </div>

    <!-- Map View Page -->
    <div id="mapPage" class="page">
      <div class="map-container">
        <!-- Back Button -->
        <div class="map-back-btn">
          <button class="back-btn" onclick="showHomePage()">
            <i class="fas fa-arrow-left"></i>
            Back
          </button>
        </div>
        
        <div id="map" class="map"></div>
        
        <!-- Floating Filter Box -->
        <div class="floating-filter">
          <button class="filter-toggle" onclick="toggleFloatingFilter()">
            <i class="fas fa-filter"></i>
            Filters
          </button>
          <div class="floating-filter-content hidden">
            <div class="filter-option">
              <button class="filter-btn" data-filter-key="nightLighting" onclick="toggleTopFilter('nightLighting', this)">
                <i class="fas fa-lightbulb"></i>
                Night Lighting
              </button>
            </div>
            <div class="filter-option">
              <button class="filter-btn" data-filter-key="fenced" onclick="toggleTopFilter('fenced', this)">
                <i class="fas fa-shield"></i>
                Fencing
              </button>
            </div>
            <div class="filter-option">
              <button class="filter-btn" data-filter-key="offLeash" onclick="toggleTopFilter('offLeash', this)">
                <i class="fas fa-dog"></i>
                Off-Leash
              </button>
            </div>
            <div class="filter-option">
              <button class="filter-btn" data-filter-key="smallDogEnclosure" onclick="toggleTopFilter('smallDogEnclosure', this)">
                <i class="fas fa-paw"></i>
                SMALL DOG ENCLOSURE
              </button>
            </div>
            <div class="filter-option">
              <button class="filter-btn" data-filter-key="agility" onclick="toggleTopFilter('agility', this)">
                <i class="fas fa-person-running"></i>
                DOG AGILITY EQUIPMENT
              </button>
            </div>
            <div class="filter-option">
              <button class="filter-btn" data-filter-key="waterFountain" onclick="toggleTopFilter('waterFountain', this)">
                <i class="fas fa-droplet"></i>
                Water Fountain
              </button>
            </div>
          </div>
        </div>

        <!-- Map Legend -->
        <div class="map-legend">
          <div class="legend-header">
            <i class="fas fa-info-circle"></i>
            <span>Map Legend</span>
          </div>
          <div class="legend-items">
            <div class="legend-item">
              <div class="legend-marker red-marker"></div>
              <span>Regular Parks</span>
            </div>
            <div class="legend-item">
              <div class="legend-marker green-marker"></div>
              <span>Off-Leash Areas</span>
            </div>
            <div class="legend-item">
              <div class="legend-marker blue-marker"></div>
              <span>Your Location</span>
            </div>
          </div>
        </div>

        <!-- Navigation Button -->
        <div class="navigation-btn hidden" id="navigationBtn">
          <button onclick="openNavigation()">
            <i class="fas fa-directions"></i>
            Get Directions
          </button>
        </div>
      </div>
    </div>

    <!-- List View Page -->
    <div id="listPage" class="page">
      <div class="list-container">
        <div class="list-header">
          <h2>Nearby Dog Parks</h2>
          <button class="back-btn" onclick="showHomePage()">
            <i class="fas fa-arrow-left"></i>
            Back
          </button>
        </div>
        <div id="parksList" class="parks-list">
          <!-- Parks will be loaded here -->
        </div>
      </div>
    </div>
  </main>

  <!-- Modals and Popups -->
  
  <!-- Filter Popup -->
  <div id="filterPopup" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="filterTitle">Filter Options</h3>
        <button class="close-btn" onclick="closeModal('filterPopup')">&times;</button>
      </div>
      <div class="modal-body" id="filterContent">
        <!-- Dynamic filter content -->
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" onclick="closeModal('filterPopup')">Cancel</button>
        <button class="primary-btn" onclick="applyFilter()">Apply</button>
      </div>
    </div>
  </div>

  <!-- Park Details Popup -->
  <div id="parkDetailsPopup" class="modal">
    <div class="modal-content park-details">
      <div class="modal-header">
        <h3 id="parkName">Park Name</h3>
        <button class="close-btn" onclick="closeModal('parkDetailsPopup')">&times;</button>
      </div>
      <div class="modal-body">
        <div class="park-info">
          <div class="park-rating">
            <div class="stars" id="parkStars"></div>
            <span id="parkRating">4.5</span>
          </div>
          <div class="park-features" id="parkFeatures">
            <!-- Features will be loaded here -->
          </div>
          <div class="park-description" id="parkDescription">
            <!-- Description will be loaded here -->
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" onclick="closeModal('parkDetailsPopup')">Close</button>
        <button class="primary-btn" onclick="expandParkDetails()">View Full Details</button>
      </div>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Login</h3>
        <button class="close-btn" onclick="closeModal('loginModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="loginForm">
          <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" required>
          </div>
          <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" required>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" onclick="closeModal('loginModal')">Cancel</button>
        <button class="primary-btn" onclick="login()">Login</button>
      </div>
    </div>
  </div>

  <!-- About Modal -->
  <div id="aboutModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>About Dog Friendly Map</h3>
        <button class="close-btn" onclick="closeModal('aboutModal')">&times;</button>
      </div>
      <div class="modal-body">
        <div class="about-section">
          <h4>Disclaimer</h4>
          <p>This application provides information about dog-friendly areas based on publicly available data. Please verify current regulations and conditions before visiting any location.</p>
        </div>
        <div class="about-section">
          <h4>Tutorial</h4>
          <p>1. Enter your location in the search box<br>
             2. Use filters to find parks that meet your needs<br>
             3. View results on map or in list format<br>
             4. Click on parks for detailed information<br>
             5. Get directions to your chosen location</p>
        </div>
        <div class="about-section">
          <h4>Data Sources</h4>
          <p>Park data is sourced from Brisbane City Council's open data portal:<br>
             - Park Dog Off-leash Areas<br>
             - Park Locations</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Preferences Modal -->
  <div id="preferencesModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>My Saved Preferences</h3>
        <button class="close-btn" onclick="closeModal('preferencesModal')">&times;</button>
      </div>
      <div class="modal-body">
        <div id="savedPreferences">
          <!-- Saved preferences will be loaded here -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // Prevent 404 errors by handling missing resources gracefully
    window.addEventListener('error', function(e) {
      if (e.target.tagName === 'SCRIPT' || e.target.tagName === 'LINK') {
        console.log('Resource failed to load:', e.target.src || e.target.href);
        e.preventDefault();
      }
    });
  </script>
  <script src="script.js?v=20251005"></script>
  <script async defer 
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjZ5jdPjwR2ee_sglxPQB5tcrTxHMFO30&libraries=places&callback=initGoogleMaps"
          onerror="console.error('Failed to load Google Maps API')">
  </script>
</body>
</html>
